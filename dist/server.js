(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("express");var n=e.n(t);const r=require("cors");var a=e.n(r);const o=require("fs");var i=e.n(o);const c=require("path");var s=e.n(c);const u=require("mockjs");var l=e.n(u);const p=require("react");var h=e.n(p);const d=require("react-dom/server.js"),m=require("react-redux"),f=require("react-router-dom"),v=require("react-router-config"),g=require("@ant-design/icons"),y=require("antd");var b=y.Menu.SubMenu;const j=function(){var e,t=(0,p.useState)(""),n=t[0],r=t[1],a=(0,f.useLocation)();(0,p.useEffect)((function(){r(a.pathname)}),[]);var o=(0,p.useMemo)((function(){return X.find((function(e){return"/home"===e.path}))}),[X]);return h().createElement(y.Menu,{onClick:function(e){r(e.key)},selectedKeys:[n],mode:"horizontal"},null===(e=null==o?void 0:o.routes)||void 0===e?void 0:e.map((function(e){return h().createElement(y.Menu.Item,{key:e.path},h().createElement(f.Link,{to:e.path},e.name))})),h().createElement(b,{key:"SubMenu",icon:h().createElement(g.SettingOutlined,null),title:"Navigation  - Submenu"},h().createElement(y.Menu.ItemGroup,{title:"Item 1"},h().createElement(y.Menu.Item,{key:"setting:1"},"Option 1"),h().createElement(y.Menu.Item,{key:"setting:2"},"Option 2")),h().createElement(y.Menu.ItemGroup,{title:"Item 2"},h().createElement(y.Menu.Item,{key:"setting:3"},"Option 3"),h().createElement(y.Menu.Item,{key:"setting:4"},"Option 4"))),h().createElement(y.Menu.Item,{key:"blog"},h().createElement("a",{href:"https://zhuanwan.github.io/blogs/",target:"_blank",rel:"noopener noreferrer"},"我的博客")))},O=require("@babel/runtime/helpers/asyncToGenerator");var E=e.n(O);const x=require("@babel/runtime/helpers/slicedToArray");var C=e.n(x);const q=require("@babel/runtime/regenerator");var w=e.n(q);const S=require("axios");var k=e.n(S);const R=require("react/jsx-runtime");var M=function e(){var t=(0,m.useDispatch)(),n=(0,p.useState)(!1),r=C()(n,2),a=r[0],o=r[1],i=(0,p.useState)(!1),c=C()(i,2),s=c[0],u=(c[1],(0,m.useSelector)((function(e){return e.demoOne.list}))),l=function(){var n=E()(w().mark((function n(){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(!0),n.next=3,e.appSyncRequestFetching({dispatch:t});case 3:o(!1);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,p.useEffect)((function(){"client"===window._RENDER_ENV&&l()}),[]);var h=s?null:(0,R.jsx)("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:(0,R.jsx)(y.Button,{onClick:l,children:"loading more"})});return(0,R.jsx)(y.Card,{children:(0,R.jsx)(y.List,{className:"demo-loadmore-list",itemLayout:"horizontal",loadMore:h,loading:a,dataSource:u,renderItem:function(e){return(0,R.jsx)(y.List.Item,{actions:[(0,R.jsx)("a",{children:"edit"},"list-loadmore-edit"),(0,R.jsx)("a",{children:"more"},"list-loadmore-more")],children:(0,R.jsxs)(y.Skeleton,{avatar:!0,title:!1,loading:e.loading,active:!0,children:[(0,R.jsx)(y.List.Item.Meta,{avatar:(0,R.jsx)(y.Avatar,{src:e.image}),title:(0,R.jsx)("a",{children:e.name}),description:e.email}),(0,R.jsx)("div",{children:e.content})]})})}})})};M.appSyncRequestFetching=function(e){return(0,e.dispatch)(function(){var e=E()(w().mark((function e(t){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k().get("http://localhost:4000/getDemoOne");case 2:n=e.sent,r=n.data,t({type:"RECEIVE_DEMO_ONE_LIST",payload:r.data.list});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};const P=M,I=require("@babel/runtime/helpers/classCallCheck");var T=e.n(I);const D=require("@babel/runtime/helpers/createClass");var F=e.n(D);const _=require("@babel/runtime/helpers/assertThisInitialized");var N=e.n(_);const L=require("@babel/runtime/helpers/inherits");var A=e.n(L);const V=require("@babel/runtime/helpers/possibleConstructorReturn");var z=e.n(V);const B=require("@babel/runtime/helpers/getPrototypeOf");var G=e.n(B);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G()(e);if(t){var a=G()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z()(this,n)}}var J={c:"Celsius",f:"Fahrenheit"};function K(e){return 5*(e-32)/9}function W(e){return 9*e/5+32}function $(e,t){var n=parseFloat(e);if(Number.isNaN(n))return"";var r=t(n);return(Math.round(1e3*r)/1e3).toString()}function Q(e){return e.celsius>=100?(0,R.jsx)("p",{children:"The water would boil."}):(0,R.jsx)("p",{children:"The water would not boil."})}var U=function(e){A()(n,e);var t=H(n);function n(e){var r;return T()(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(N()(r)),r}return F()(n,[{key:"handleChange",value:function(e){this.props.onTemperatureChange(e.target.value)}},{key:"render",value:function(){var e=this.props.temperature,t=this.props.scale;return(0,R.jsxs)("fieldset",{children:[(0,R.jsxs)("legend",{children:["Enter temperature in ",J[t],":"]}),(0,R.jsx)("input",{value:e,onChange:this.handleChange})]})}}]),n}(h().Component);const X=[{path:"/a",component:function(e){A()(n,e);var t=H(n);function n(e){var r;return T()(this,n),(r=t.call(this,e)).handleCelsiusChange=r.handleCelsiusChange.bind(N()(r)),r.handleFahrenheitChange=r.handleFahrenheitChange.bind(N()(r)),r.state={temperature:"",scale:"c"},r}return F()(n,[{key:"handleCelsiusChange",value:function(e){this.setState({scale:"c",temperature:e})}},{key:"handleFahrenheitChange",value:function(e){this.setState({scale:"f",temperature:e})}},{key:"render",value:function(){var e=this.state.scale,t=this.state.temperature,n="f"===e?$(t,K):t,r="c"===e?$(t,W):t;return(0,R.jsxs)("div",{children:[(0,R.jsx)(U,{scale:"c",temperature:n,onTemperatureChange:this.handleCelsiusChange}),(0,R.jsx)(U,{scale:"f",temperature:r,onTemperatureChange:this.handleFahrenheitChange}),(0,R.jsx)(Q,{celsius:parseFloat(n)})]})}}]),n}(h().Component)},{path:"/",exact:!0,render:function(){return(0,R.jsx)(f.Redirect,{to:"/home/list"})},exactComponent:P},{path:"/home",component:function(e){return h().createElement(h().Fragment,null,h().createElement(j,null),(0,v.renderRoutes)(e.route.routes))},routes:[{path:"/home/list",component:P,exact:!0,name:"列表"},{path:"/home/form",component:function(){return h().createElement(p.Fragment,null,h().createElement("div",{className:"content"},h().createElement("h1",null,"表单!")))},name:"表单"}]},{path:"*",component:function(){return(0,R.jsx)(p.Fragment,{children:(0,R.jsx)("div",{className:"content",children:(0,R.jsx)("h3",{children:"404 - Not found"})})})}}],Y=require("redux"),Z=require("redux-thunk");var ee=e.n(Z);const te=require("@babel/runtime/helpers/defineProperty");var ne=e.n(te);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={list:[]};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se={detail:null};const ue=(0,Y.combineReducers)({demoOne:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;return"RECEIVE_DEMO_ONE_LIST"===t.type?ae(ae({},e),{},{list:e.list.concat(t.payload)}):e},demoTwo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;return"RECEIVE_DEMO_TWO"===t.type?ce(ce({},e),{},{detail:t.payload}):e}});var le=s().resolve(s().dirname("")),pe=process.env.port||4e3,he=n()();he.use("/static",n().static(le+"/static")),he.use(n().static(le+"/dist")),he.use(a()({origin:"*"})),he.get("/getDemoOne",(function(e,t){var n=l().mock({"list|10":[{"id|+1":1,image:"@Image('100x100', 'EasyMock')",name:"@NAME",email:"@EMAIL",content:"@TITLE"}]});setTimeout((function(){t.send({code:0,data:n})}),500)})),he.get("*",(function(e,t){var n=(0,Y.createStore)(ue,{},(0,Y.applyMiddleware)(ee())),r=(0,v.matchRoutes)(X,e.path),a=[];r.map((function(e){var t,r,o=e.route;null!==(t=o.component)&&void 0!==t&&t.appSyncRequestFetching?a.push(o.component.appSyncRequestFetching(n)):null!==(r=o.exactComponent)&&void 0!==r&&r.appSyncRequestFetching&&a.push(o.exactComponent.appSyncRequestFetching(n))})),Promise.all(a).then((function(){var r=s().join(le,"/dist/app.html");i().readFile(r,"utf8",(function(r,a){if(r)return console.error("Something went wrong:",r),t.status(500).send("没有找到文件!");var o={},i=function(e,t,n,r){var a=(0,d.renderToString)((0,R.jsx)(m.Provider,{store:t,children:(0,R.jsx)(f.StaticRouter,{location:e,context:n,children:(0,R.jsx)("div",{id:"main",children:(0,v.renderRoutes)(X)})})}));return r&&(r=r.replace("{{reactApp}}",a).replace(/(<script type="server">)(\s*.*\s*)(<\/script>)/gi,'<script>window._RENDER_ENV="server";window._PRELOADED_STATE='+JSON.stringify(t.getState())+"$3")),r}(e.url,n,o,a);o.notFound&&t.status(404),t.send(i)}))}))})),he.listen(pe,(function(){return console.log("service listening on port: ".concat(pe))}))})();