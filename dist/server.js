(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("express");var r=e.n(t);const n=require("cors");var o=e.n(n);const a=require("fs");var c=e.n(a);const i=require("path");var s=e.n(i);const u=require("mockjs");var l=e.n(u);const p=require("ignore-styles");var d=e.n(p);const m=require("react");var h=e.n(m);const f=require("react-dom/server.js"),v=require("react-redux"),g=require("react-router-dom"),y=require("react-router-config"),O=require("antd"),E=function(){var e,t=(0,m.useState)(""),r=t[0],n=t[1],o=(0,g.useLocation)();(0,m.useEffect)((function(){n(o.pathname)}),[]);var a=(0,m.useMemo)((function(){return I.find((function(e){return"/home"===e.path}))}),[I]);return h().createElement(O.Menu,{onClick:function(e){n(e.key)},selectedKeys:[r],mode:"horizontal"},null===(e=null==a?void 0:a.routes)||void 0===e?void 0:e.map((function(e){return h().createElement(O.Menu.Item,{key:e.path},h().createElement(g.Link,{to:e.path},e.name))})),h().createElement(O.Menu.Item,{key:"blog"},h().createElement("a",{href:"https://zhuanwan.github.io/blogs/",target:"_blank",rel:"noopener noreferrer"},"我的博客")))},b=require("wh-calender-react");var j=e.n(b);const x=require("@babel/runtime/helpers/asyncToGenerator");var w=e.n(x);const q=require("@babel/runtime/helpers/slicedToArray");var S=e.n(q);const P=require("@babel/runtime/regenerator");var R=e.n(P);const D=require("axios");var k=e.n(D);const _=require("react/jsx-runtime");var M=function e(){var t=(0,v.useDispatch)(),r=(0,m.useState)(!1),n=S()(r,2),o=n[0],a=n[1],c=(0,m.useState)(!1),i=S()(c,2),s=i[0],u=(i[1],(0,v.useSelector)((function(e){return e.demoOne.list}))),l=function(){var r=w()(R().mark((function r(){return R().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(!0),r.next=3,e.appSyncRequestFetching({dispatch:t});case 3:a(!1);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();(0,m.useEffect)((function(){l()}),[]);var p=s?null:(0,_.jsx)("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:(0,_.jsx)(O.Button,{onClick:l,children:"loading more"})});return(0,_.jsx)(O.Card,{children:(0,_.jsx)(O.List,{className:"demo-loadmore-list",itemLayout:"horizontal",loadMore:p,loading:o,dataSource:u,renderItem:function(e){return(0,_.jsx)(O.List.Item,{actions:[(0,_.jsx)("a",{children:"edit"},"list-loadmore-edit"),(0,_.jsx)("a",{children:"more"},"list-loadmore-more")],children:(0,_.jsxs)(O.Skeleton,{avatar:!0,title:!1,loading:e.loading,active:!0,children:[(0,_.jsx)(O.List.Item.Meta,{avatar:(0,_.jsx)(O.Avatar,{src:e.image}),title:(0,_.jsx)("a",{children:e.name}),description:e.email}),(0,_.jsx)("div",{children:e.content})]})})}})})};M.appSyncRequestFetching=function(e){return(0,e.dispatch)(function(){var e=w()(R().mark((function e(t){var r,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k().get("http://localhost:4000/getDemoOne");case 2:r=e.sent,n=r.data,t({type:"RECEIVE_DEMO_ONE_LIST",payload:n.data.list});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};const I=[{path:"/",exact:!0,render:function(){return(0,_.jsx)(g.Redirect,{to:"/home/list"})},exactComponent:M},{path:"/home",component:function(e){return h().createElement(h().Fragment,null,h().createElement(E,null),(0,y.renderRoutes)(e.route.routes))},routes:[{path:"/home/list",component:M,exact:!0,name:"列表"},{path:"/home/plugins",component:function(){return h().createElement(m.Fragment,null,h().createElement("div",{className:"content"},h().createElement("div",{className:"title"},"日历"),h().createElement("div",{style:{width:400}},h().createElement(j(),null))))},name:"我的插件"}]},{path:"*",component:function(e){var t=e.staticContext;return console.log("staticContext",t),t&&(t.NotFound=!0),h().createElement(m.Fragment,null,h().createElement("div",{className:"content"},h().createElement("h3",null,"404 - Not found")))}}],N=require("redux"),T=require("redux-thunk");var F=e.n(T);const C=require("@babel/runtime/helpers/defineProperty");var L=e.n(C);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){L()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z={list:[]};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){L()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H={detail:null};const J=(0,N.combineReducers)({demoOne:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;return"RECEIVE_DEMO_ONE_LIST"===t.type?V(V({},e),{},{list:e.list.concat(t.payload)}):e},demoTwo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return"RECEIVE_DEMO_TWO"===t.type?G(G({},e),{},{detail:t.payload}):e}});d()([".css",".sass",".scss"]);var K=s().resolve(s().dirname("")),W=process.env.port||4e3,$=r()();$.use("/static",r().static(K+"/static")),$.use(r().static(K+"/dist")),$.use(o()({origin:"*"})),$.get("/getDemoOne",(function(e,t){var r=l().mock({"list|10":[{"id|+1":1,image:"@Image('100x100', 'EasyMock')",name:"@NAME",email:"@EMAIL",content:"@TITLE"}]});setTimeout((function(){t.send({code:0,data:r})}),500)})),$.get("*",(function(e,t){var r=(0,N.createStore)(J,{},(0,N.applyMiddleware)(F())),n=(0,y.matchRoutes)(I,e.path),o=[];n.map((function(e){var t,n,a=e.route;null!==(t=a.component)&&void 0!==t&&t.appSyncRequestFetching?o.push(a.component.appSyncRequestFetching(r)):null!==(n=a.exactComponent)&&void 0!==n&&n.appSyncRequestFetching&&o.push(a.exactComponent.appSyncRequestFetching(r))})),Promise.all(o).then((function(){var n=s().join(K,"/dist/app.html");c().readFile(n,"utf8",(function(n,o){if(n)return console.error("Something went wrong:",n),t.status(500).send("没有找到文件!");var a={},c=function(e,t,r,n){var o=(0,f.renderToString)((0,_.jsx)(v.Provider,{store:t,children:(0,_.jsx)(g.StaticRouter,{location:e,context:r,children:(0,_.jsx)("div",{id:"main-server",children:(0,y.renderRoutes)(I)})})}));return n&&(n=n.replace("{{reactApp}}",o).replace(/(<script type="server">)(\s*.*\s*)(<\/script>)/gi,'<script>window._RENDER_ENV="server";window._PRELOADED_STATE='+JSON.stringify(t.getState())+"$3")),n}(e.url,r,a,o);if(a.NotFound)return t.status(404).send("404");t.send(c)}))}))})),$.listen(W,(function(){return console.log("service listening on port: ".concat(W))}))})();